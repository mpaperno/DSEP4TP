<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dynamic Script Engine Plugin for Touch Portal: Status and Logging</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init();
    DoxygenAwesomeParagraphLink.init();
    DoxygenAwesomeInteractiveToc.init();
    // hide the Documentation header and sidebar link since it's redundant when on the docs site already.
    $(window).on('load', () => {
      function removeElements() {
        if (!$("a[class='index.html:autotoc_md10']").length)
          setTimeout(removeElements, 10);
        var el = document.getElementById("autotoc_md10"),
          els = document.getElementsByClassName("index.html:autotoc_md10");
        if (el)
          el.parentNode.style.display = 'none';
        if (els.length)
          els[0].parentElement.parentElement.parentElement.style.display= 'none';
      };
      removeElements();
    });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/mpaperno/DSEP4TP" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z" fill="url(#gradient)"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    <linearGradient id="gradient" x1="0.5" x2="0.5" y1="0" y2="1">
        <stop class="first-stop" offset="0%"></stop>
        <stop class="last-stop" offset="100%"></stop>
    </linearGradient>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png" title="Dynamic Script Engine Plugin for Touch Portal - A complete, standalone, multi-threaded JavaScript environment available as a plugin for use with Touch Portal macro launcher software."/></td>
  <td id="projectalign">
   <div id="projectname"><!-- Dynamic Script Engine Plugin for Touch Portal --><span id="projectnumber">&#160;v1.0.0.1-beta1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('status_and_logging.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Status and Logging </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md29">Introduction</a></li>
<li class="level1"><a href="#autotoc_md30">Status States</a></li>
<li class="level1"><a href="#autotoc_md31">Logging</a><ul><li class="level2"><a href="#autotoc_md32">&quot;Console&quot; Log</a></li>
<li class="level2"><a href="#autotoc_md33">Plugin Log</a></li>
<li class="level2"><a href="#autotoc_md34">Logging Options</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_pages_Status"></a></p>
<h1><a class="anchor" id="autotoc_md29"></a>
Introduction</h1>
<p >Inevitably, writing scripting expressions of any complexity beyond basic "2 + 2" is going to cause an error sooner or later. Maybe due to syntax or some unexpected value being passed to a function. It happens.</p>
<p >The plugin has a number of ways to provide feedback about errors and facilitate debugging. There are also extensive file logging options available.</p>
<h1><a class="anchor" id="autotoc_md30"></a>
Status States</h1>
<p >First, the plugin provides two permanent States which reflect scripting errors as they happen:</p><ul>
<li><b>Cumulative script error count</b> - A running count of script errors which increments on each exception. This is useful as a trigger for some Touch Portal event which would notify you that a new error occurred. A button that turns red or something.</li>
<li><b>Last script instance error</b> - This state will update every time the error count changes and will contain the text of the last error message. This could be shown somewhere in a Touch Portal page for example. The error message includes the error number (which always increments) and a time stamp, so therefore will always be unique and can be safely used in Touch Portal's "when plug-in state changes" event.</li>
</ul>
<p >Check the <a class="el" href="example_line_logger.html">Line Logger example</a> for a script/button combination which will store and display the last few errors received.</p>
<p >There is also:</p><ul>
<li><b>List of created named instances</b> - This state contains a list of all the dynamic expression/script instances created by the plugin. It may be useful to check (visually or with a conditional expression) whether an instance exists, for example to indicate an error condition if it doesn't or only create a new instance inside an Event if it doesn't already exist.</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
Logging</h1>
<p >The plugin logs operational message to a file. Two, actually. They are both located in your Touch Portal configuration folder, in the 'plugins' subfolder; the path looks like:<br  />
</p><ul>
<li>Windows: <code>C:\Users\&lt;User_Name&gt;\AppData\Roaming\TouchPortal\plugins\DSEP4TP\logs</code></li>
<li>Mac: <code>~/Documents/TouchPortal/plugins/DSEP4TP/logs</code></li>
<li>Linux: <code>~/TouchPortal/plugins/DSEP4TP/logs</code></li>
</ul>
<p >The two log files are:</p>
<h2><a class="anchor" id="autotoc_md32"></a>
"Console" Log</h2>
<p >Scripting errors are logged to their own file in the log folder named <code>console.log</code>. You can also write your own messages to this log by using the typical JavaScript <code>console.log()</code> (and family) of functions.</p>
<p >This should be the first point of reference when something doesn't work right (usual symptom: "nothing happens when I run the script.") When actively working on a script or expression, it will save a lot of time to keep a constant eye on the log (and the error states described above).</p>
<p >Check the <a class="el" href="example_tail.html">Tail example</a> for a script/button combination which will "tail" the console log on demand (that is, show the last few lines of the log and update whenever the log changes).</p>
<p >You can also "tail" a file using operating system utilities. For example (showing last 10 lines)</p><ul>
<li>Windows <a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/get-content" target="_blank">PowerShell</a><br  />
 <div class="fragment"><div class="line">Get-Content -Tail 10 -Wait $Env:APPDATA\TouchPortal\plugins\DSEP4TP\logs\console.log</div>
</div><!-- fragment --></li>
<li><a href="https://ss64.com/osx/tail.html" target="_blank">OS X</a> or <a href="https://ss64.com/bash/tail.html" target="_blank">Linux</a> terminal <div class="fragment"><div class="line">tail -F -n 10 ~/Documents/TouchPortal/plugins/DSEP4TP/logs/console.log</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
Plugin Log</h2>
<p >The main plugin log, cleverly named <code>plugin.log</code>, is where all messages are written, including general operational information from the plugin, especially any errors it may have encountered that are not directly related to your scripts (but maybe to the actions you're sending to the plugin, like a missing required data field, or some other overall operational issue).</p>
<p >This log <em>also</em> includes script engine errors (same ones as in <em>console.log</em>). It can be helpful to get the "full picture" if something particularly insidious is going wrong.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Logging Options</h2>
<p >The logs are rotated daily. The previous days' log is renamed with a date stamp and a new one is started. By default the last 3 days' worth of logs are kept (the current one + 3 historical logs).</p>
<p >You can force a rotation of the logs by going to the plugin's executable directory (<code>DSEP4TP/bin</code>) in a terminal/command window and run the plugin (w/out starting it) with the following command:<br  />
</p><ul>
<li>Windows: <code>DSEP4TP.exe -f1 -j1 -rx</code></li>
<li>Mac/Linux: <code>./DSEP4TP -f1 -j0 -rx</code></li>
<li>Optionally add a <code>-k N</code> switch to the command line to keep <code>N</code> number of logs instead of the default 3. Clear out all old logs by using <code>-k 0</code></li>
<li>Use <code>-h</code> to see all command-line options.</li>
</ul>
<p >The log files have an "emergency limit" of 1GB in case something goes haywire. If this limit is reached, further logging to that file is disabled until the plugin is restarted.</p>
<p ><span class="next_section_button"> Read Next: <a class="el" href="plugin_scripting.html#md_pages_Scripting">Scripting Syntax and Caveats</a> </span> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 22 2022 11:06:22 for Dynamic Script Engine Plugin for Touch Portal by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
