<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dynamic Script Engine Plugin for Touch Portal: Color Picker Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init();
    DoxygenAwesomeParagraphLink.init();
    DoxygenAwesomeInteractiveToc.init();
    // hide the Documentation header and sidebar link since it's redundant when on the docs site already.
    $(window).on('load', () => {
      function removeElements() {
        if (!$("a[class='index.html:autotoc_md11']").length)
          setTimeout(removeElements, 10);
        var el = document.getElementById("autotoc_md11"),
          els = document.getElementsByClassName("index.html:autotoc_md11");
        if (el)
          el.parentNode.style.display = 'none';
        if (els.length)
          els[0].parentElement.parentElement.parentElement.style.display= 'none';
      };
      removeElements();
    });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/mpaperno/DSEP4TP" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z" fill="url(#gradient)"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    <linearGradient id="gradient" x1="0.5" x2="0.5" y1="0" y2="1">
        <stop class="first-stop" offset="0%"></stop>
        <stop class="last-stop" offset="100%"></stop>
    </linearGradient>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png" title="Dynamic Script Engine Plugin for Touch Portal - A complete, standalone, multi-threaded JavaScript environment available as a plugin for use with Touch Portal macro launcher software."/></td>
  <td id="projectalign">
   <div id="projectname"><!-- Dynamic Script Engine Plugin for Touch Portal --><span id="projectnumber">&#160;v1.0.0.2-beta2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('example_color_picker.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="class_color.html" title="Provides functions for working with color.">Color</a> Picker Example </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_D__Devel_TouchPortal_DynamicValues_DynamicValuesTPP_resources_examples_ColorPicker_README"></a>A script and page example of an interface for choosing a color.</p>
<div class="hide-on-site"></div><div class="hide-on-site"><b>See the <a href="https://dse.tpp.max.paperno.us/example_color_picker.html" target="_blank">published documentation</a> for a properly formatted version of this README.</b> </div><p >This example demonstrate some uses of the <a class="el" href="class_color.html" title="Provides functions for working with color.">Color</a> library to create a basic "color picker" type interface (scroll down for page screenshot). It also uses the <a class="el" href="example_clipboard.html">Clipboard example</a> module for interacting with the system clipboard (copying colors to and from).</p>
<p >The script itself is mostly just an "interface" to the various color manipulation features available with a <a class="el" href="class_color.html" title="Provides functions for working with color.">Color</a> object. It stores an instance of a <a class="el" href="class_color.html" title="Provides functions for working with color.">Color</a> value, which is the "current color," and all operations are performed on this color, after which it is usually sent back to Touch Portal as a new color value to be displayed somewhere (like the central "swatch" in the example page).</p>
<p >The example page uses 7 global Touch Portal Values as inputs to control various aspects of the color (color channel values, opacity, saturation, etc). Each Value is controlled by a Slider and also the corresponding up/down buttons. The central "color swatch" button is where the input value changes are detected and sent to the loaded script (which then returns the new resulting color to use as the swatch background color).</p>
<p >Additionally there are buttons to invoke clipboard functions to copy the current color to clipboard in various formats, and another button to set the current color <em>from</em> a value on the clipboard (it has to be in one of the recognized formats... see <code>setColor()</code> notes in the code below).</p>
<p >The up/down buttons for each input value are there because Touch Portal Sliders only have a resolution of 0 through 100, whereas most of the actual color values can be in a range of 0 through 255 (or 0-360 for Hue). So, the buttons provide a way to "fine tune" the value to account for the missing resolution of the sliders.</p>
<dl class="section note"><dt>Note</dt><dd>Assets for this example, including the code and page shown below, can be found in the project's repository at<br  />
 <a href="https://github.com/mpaperno/DSEP4TP/tree/main/resources/examples/ColorPicker/">https://github.com/mpaperno/DSEP4TP/tree/main/resources/examples/ColorPicker/</a></dd></dl>
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Import clipboard functions from Clipboard example module.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">import</span> { valueToClipboard, clipboardToValue } from <span class="stringliteral">&quot;../Clipboard/clipboard.mjs&quot;</span>;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// Stores the current color value. Not exported, access via `color()` and `setColor()` functions.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span>var _color = _color || <span class="keyword">new</span> <a class="code hl_class" href="class_color.html">Color</a>(<span class="stringliteral">&#39;#FFFFFF&#39;</span>);</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// Returns the current Color object, on which various methods can be invoked directly.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// See documentation at: https://dse.tpp.max.paperno.us/class_color.html</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>export <span class="keyword">function</span> color()</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>{</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>  <span class="keywordflow">return</span> _color;</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>}</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// Returns current color in &quot;Touch Portal&quot; format of #AARRGGBB format,</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// suitable for use in an &quot;Change visuals by plug-in state&quot; action.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>export <span class="keyword">function</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>()</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>{</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>  <span class="keywordflow">return</span> _color.tpcolor();</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>}</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">// Sets the current color to `color` which can be:</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">// - An hex string in &quot;#RRGGBB[AA]&quot; format, with or w/out the leading &quot;#&quot;;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// - A color name from CSS specification, eg &quot;red&quot;, &quot;darkblue&quot;, etc.;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">// - Any other valid CSS-style color specifier string, eg. &quot;rgba(255, 0, 0, .5)&quot; or &quot;hsl(0, 100%, 50%)&quot; or &quot;hsva(0, 100%, 50%, .5)&quot;, etc.;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// - An object representing rgb[a]/hsl[a]/hsv[a] values, eg. `{ r: 255, g: 0, b: 0 }` or  `{ h: 0, s: 1, l: .5, a: .75 }` or `{ h: 0, s: 100, v: 100 }`;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">// - Another Color object instance.</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>export <span class="keyword">function</span> setColor(color)</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>{</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>  _color = <span class="keyword">new</span> <a class="code hl_class" href="class_color.html">Color</a>(color);</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>}</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="comment">// Set the red component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>export <span class="keyword">function</span> setRed(percent)</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>{</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>  _color._r = percentToShort(percent);</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>}</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">// Set the green component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>export <span class="keyword">function</span> setGreen(percent)</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>{</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>  _color._g = percentToShort(percent);</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>}</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">// Set the blue component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>export <span class="keyword">function</span> setBlue(percent)</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>{</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  _color._b = percentToShort(percent);</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>}</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">// Set the hue component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>export <span class="keyword">function</span> setHue(percent)</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>{</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  var hsl = _color.toHsl();</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  hsl.h = percentToDegrees(percent);</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <span class="keywordflow">return</span> setColor(hsl);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>}</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment">// Set the saturation component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>export <span class="keyword">function</span> setSaturation(percent)</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>{</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  var hsl = _color.toHsl();</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <span class="keywordflow">if</span> (percent === 1)</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    percent += .01;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  hsl.s = percent;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  <span class="keywordflow">return</span> setColor(hsl);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>}</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">// Set the lightness component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>export <span class="keyword">function</span> setLightness(percent)</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>{</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  var hsl = _color.toHsl();</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  <span class="keywordflow">if</span> (percent === 1)</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    percent += .01;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  hsl.l = percent;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>  <span class="keywordflow">return</span> setColor(hsl);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>}</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">// Set the value component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>export <span class="keyword">function</span> setValue(percent)</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>{</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  var hsv = _color.toHsv();</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="keywordflow">if</span> (percent === 1)</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    percent += .01;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  hsv.v = percent;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <span class="keywordflow">return</span> setColor(hsv);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>}</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment">// Set the alpha (transparency) component of the current color to a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>export <span class="keyword">function</span> setAlpha(alpha)</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>{</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>  _color.setAlpha(alpha * 0.01);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>}</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// Adjustment (step increment/decrement) functions.</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">// Changes the red component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>export <span class="keyword">function</span> adjustRed(amount)</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="keywordflow">return</span> setRed(_color._r + percentToShort(amount));</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>}</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">// Changes the green component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>export <span class="keyword">function</span> adjustGreen(amount)</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>{</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="keywordflow">return</span> setGreen(_color._g + percentToShort(amount));</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>}</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">// Changes the blue component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>export <span class="keyword">function</span> adjustBlue(amount)</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>{</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  <span class="keywordflow">return</span> setBlue(_color._b + percentToShort(amount));</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">// Changes the alhpa component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>export <span class="keyword">function</span> adjustAlpha(amount)</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>{</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="keywordflow">return</span> setAlpha(_color.alpha() + amount * 0.01);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>}</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">// Changes the hue component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>export <span class="keyword">function</span> adjustHue(amount)</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>{</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <span class="keywordflow">return</span> setHue(_color.toHsl().h + percentToDegrees(amount));</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>}</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">// Changes the saturation component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>export <span class="keyword">function</span> adjustSaturation(amount)</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>{</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <span class="keywordflow">return</span> setSaturation(_color.toHsl().s + amount);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>}</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment">// Changes the lightness component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>export <span class="keyword">function</span> adjustLightness(amount)</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>{</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <span class="keywordflow">return</span> setLightness(_color.toHsl().l + amount);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>}</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment">// Changes the value component of the current color by a percentage value (0 - 100) and returns the new color as an #AARRGGBB string.</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>export <span class="keyword">function</span> adjustValue(amount)</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>{</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <span class="keywordflow">return</span> setValue(_color.toHsv().v + amount);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>}</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><span class="comment">// Clipboard functions. Uses Clipboard example module, imported at top.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="comment">// NOTE: Linux requires `xclip` utility installed.</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="comment">// Tries to set a new color from a clipboard value. Accepted formats are same as described in `setColor()` above.</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment">// In case the clipboard does not hold a valid color value, this function will log a warning message and return</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment">// the current color instead (no changes to current color will be made).</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>export <span class="keyword">function</span> fromClipboard()</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>{</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <span class="keyword">const</span> val = clipboardToValue();</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  <span class="comment">// console.log(&quot;Clipboard value:&quot;, val);</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="keyword">const</span> color = <span class="keyword">new</span> <a class="code hl_class" href="class_color.html">Color</a>(val);</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="keywordflow">if</span> (color.isValid())</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">return</span> setColor(color);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  console.error(<span class="stringliteral">&quot;Clipboard contents were not a valid color.&quot;</span>);</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">tpcolor</a>();</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>}</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="comment">// Copy current color in &quot;#RRGGBBAA&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>export <span class="keyword">function</span> copyRgba()</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>{</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  valueToClipboard(_color.rgba());</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">// Copy current color in &quot;#RRGGBB&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>export <span class="keyword">function</span> copyHex()</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  valueToClipboard(_color.hex());</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>}</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">// Copy current color in &quot;#AARRGGBB&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>export <span class="keyword">function</span> copyArgb()</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>{</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  valueToClipboard(_color.argb());</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>}</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="comment">// Copy current color in &quot;rgb(r, g, b [, a])&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="comment">// The alpha component will be included if it is not fully opaque (&lt; 1.0).</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span><span class="comment">// eg: rgb(214, 173, 46) or rgba(214, 173, 46, 0.61)</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>export <span class="keyword">function</span> copyRgb()</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>{</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  valueToClipboard(_color.rgb());</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>}</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="comment">// Copy current color in &quot;hsv[a](h, s%, v% [, a])&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="comment">// The alpha component will be included if it is not fully opaque (&lt; 1.0).</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="comment">// eg: hsv(45, 79%, 84%) or hsva(45, 79%, 84%, 0.61)</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>export <span class="keyword">function</span> copyHsv()</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>{</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  valueToClipboard(_color.hsv());</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>}</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment">// Copy current color in &quot;hsl[a](h, s%, v% [, a])&quot; format to the clipboard.</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="comment">// The alpha component will be included if it is not fully opaque (&lt; 1.0).</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">// eg: hsl(45, 67%, 51%) or hsla(45, 67%, 51%, 0.61)</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>export <span class="keyword">function</span> copyHsl()</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>{</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  valueToClipboard(_color.hsl());</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>}</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment">// internal utility, not exported</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="keyword">function</span> percentToShort(value) { <span class="keywordflow">return</span> <a class="code hl_function" href="class_math.html#a3bf8d748d3c4af419876eebedfdcc52b">roundTo</a>(value.clamp(0, 100) * 2.55, 0) }</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="keyword">function</span> percentToDegrees(value) { <span class="keywordflow">return</span> <a class="code hl_function" href="class_math.html#a3bf8d748d3c4af419876eebedfdcc52b">roundTo</a>(value.clamp(0, 100) * 3.6, 0) }</div>
<div class="ttc" id="aclass_color_html"><div class="ttname"><a href="class_color.html">Color</a></div><div class="ttdoc">Provides functions for working with color.</div></div>
<div class="ttc" id="aclass_color_html_af7a57ec62f370d92e749c92e43e62f68"><div class="ttname"><a href="class_color.html#af7a57ec62f370d92e749c92e43e62f68">Color::tpcolor</a></div><div class="ttdeci">string tpcolor()</div><div class="ttdoc">Returns color formatted in #AARRGGBB format (this is suitable for use with Touch Portal's &quot;Set Text/B...</div><div class="ttdef"><b>Definition:</b> color.js:474</div></div>
<div class="ttc" id="aclass_math_html_a3bf8d748d3c4af419876eebedfdcc52b"><div class="ttname"><a href="class_math.html#a3bf8d748d3c4af419876eebedfdcc52b">Math::roundTo</a></div><div class="ttdeci">number roundTo(number value, number precision)</div><div class="ttdoc">Round value to precision decimal places.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md62"></a>
Example page using this script</h2>
<p ><a href="example_color_picker_screenshot.jpg" target="image" title="Click for full version in new window."><img src="example_color_picker_screenshot.jpg" alt="" class="inline"/> </a></p>
<p >The page can be downloaded from the Assets link in the Note above. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="plugin_examples.html">Examples</a></li>
    <li class="footer">Generated for Dynamic Script Engine Plugin for Touch Portal &#160;v1.0.0.2-beta2 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
