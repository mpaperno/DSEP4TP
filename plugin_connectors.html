<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dynamic Script Engine Plugin for Touch Portal: Plugin Connectors (Sliders)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init();
    DoxygenAwesomeParagraphLink.init();
    DoxygenAwesomeInteractiveToc.init();
    // hide the Documentation header and sidebar link since it's redundant when on the docs site already.
    $(window).on('load', () => {
      function removeElements() {
        if (!$("a[class='index.html:autotoc_md11']").length)
          setTimeout(removeElements, 10);
        var el = document.getElementById("autotoc_md11"),
          els = document.getElementsByClassName("index.html:autotoc_md11");
        if (el)
          el.parentNode.style.display = 'none';
        if (els.length)
          els[0].parentElement.parentElement.parentElement.style.display= 'none';
      };
      removeElements();
    });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/mpaperno/DSEP4TP" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z" fill="url(#gradient)"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    <linearGradient id="gradient" x1="0.5" x2="0.5" y1="0" y2="1">
        <stop class="first-stop" offset="0%"></stop>
        <stop class="last-stop" offset="100%"></stop>
    </linearGradient>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png" title="Dynamic Script Engine Plugin for Touch Portal - A complete, standalone, multi-threaded JavaScript environment available as a plugin for use with Touch Portal macro launcher software."/></td>
  <td id="projectalign">
   <div id="projectname"><!-- Dynamic Script Engine Plugin for Touch Portal --><span id="projectnumber">&#160;v1.1.0.1-beta1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('plugin_connectors.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Plugin Connectors (Sliders) </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md33">Using Connectors</a></li>
<li class="level1"><a href="#autotoc_md34">Other Differences</a></li>
<li class="level1"><a href="#autotoc_md35">Considerations</a></li>
<li class="level1"><a href="#plugin_connectors_updating">Updating Sliders from Scripts</a></li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_pages_Connectors"></a></p>
<p >"Connectors" in Touch Portal-speak are essentially the equivalent of Actions for Buttons, but can (only) be used on Slider type controls (and of course vice versa that Actions can't be used on Sliders). This plugin provides 4 of its Actions, documented on the previous page, as Connectors.</p>
<p ><img src="images/actions/connectors-list.png" alt="" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md33"></a>
Using Connectors</h1>
<p >Besides the obvious difference in the "physical" control between buttons and sliders, the only practical difference as far as this plugin goes is that a connector/slider can, optionally, pass the slider's current position value (0 - 100 range) to the expression/module function being invoked.</p>
<p >This is done by placing a special "placeholder," or macro, as a value wherever you'd like it to appear (eg. in a function invocation parameter, or as part of some expression calculation). The placeholder gets replaced <em>by the plugin</em> with a numeric value representing the slider position (an integer in the range of 0 through 100).</p>
<p >This magical placeholder is: <code>${connector_value}</code></p>
<p >Here is an example shot of an "Update" type connector (from the <a class="el" href="example_color_picker.html">Color Picker Example</a>):</p>
<p ><a href="images/actions/slider-update.png" target="fullSizeImg"><img src="images/actions/slider-update.png" alt="" class="inline"/></a></p>
<p >Here the <em>DSE_ColorPicker</em> is an existing instance which imports a module. This connector invokes the <code>setGreen()</code> function in that module, and passes the slider's current value as the only parameter to the function. When the plugin receives this connector event, it will replace <code>${connector_value}</code> with the actual numeric value of the slider's position before invoking the <code>setGreen()</code> function. The end result would, for example, be <code>M.setGreen(35)</code>.</p>
<h1><a class="anchor" id="autotoc_md34"></a>
Other Differences</h1>
<ul>
<li>The "Load Script File" action is not available.</li>
<li>The Action Type on "Anonymous (One-Time) Script" connector is limited to Expression and Module types.</li>
<li>The "Create State at Startup" options are removed.</li>
<li>As of v3.1, Touch Portal does not display any descriptions above the connector actions.</li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
Considerations</h1>
<p >Sliders/connectors can produce events very quickly when they are being moved, up to around 10 updates per second (each). In theory a user could move as many sliders at the same time as they have fingers, but even with just a couple of them moving at once, that's significantly fast input. If you try to do any operation when a slider value changes that takes more than a few milliseconds to run, this could generally not end very well.</p>
<p >This is why the "Load Script" type connector (and option on "Anonymous") is not included. Believe me you do not want to be loading files from disk at 10Hz. The Module type works fine because the modules are cached after first load, based purely on file name (there's not even a modification timestamp check or anything "expensive" like that).</p>
<p >Likewise the "Create at startup" options are removed to slightly optimize parsing the connector data on the plugin side. If you need a default, create it with an Action. (Or let me know why that is a problem and we could reconsider the decision.)</p>
<p >The most efficient type of Connector is "Update Existing Instance" since that needs the least amount of pre-processing by the plugin before actually being evaluated.</p>
<h1><a class="anchor" id="plugin_connectors_updating"></a>
Updating Sliders from Scripts</h1>
<p >One of the benefits of having "native" sliders in this plugin itself is that we can track their use on pages and update their positions dynamically if we want to. For example to reflect the value of some variable which was changed independently of the user moving the connector (eg. a volume was adjusted externally and the slider position should represent the current value). Due to the nature of the Touch Portal Connectors API, it is difficult-to-impossible to update sliders provided by Touch Portal itself (like "Set Value" connector), or other plugins [*].</p>
<p >To update the position of a Slider used on a Touch Portal page the program needs to know that Slider's special unique ID string. This could be a "long" ID comprised of all the options currently selected in the connector (and some other parts), or a "short ID" which Touch Portal generates for each Slider instance. The "long ID" has a limit of 200 characters, and is cumbersome to use in general, so this option usually isn't very useful. We pretty much need to use the generated "short IDs," but the challenge is knowing which ID corresponds to which Slider/connector action since that data is only available from Touch Portal itself and may easily change.</p>
<p >To help with this conundrum Touch Portal sends special "short connector ID generated" messages to a plugin whenever that plugin's connectors are added to a page or edited to reflect a new unique combination of options. These notifications are one-time and transitory, meaning if one needs to store the data for later reference (eg. which short ID to update later when a value changes), one must implement that inside the plugin itself. A slew of these notifications may be sent when the plugin first starts up, as Touch Portal sends one for each existing Slider instance. Notably though, these notifications are <em>only</em> sent to the plugin which "provided" the connectors in the first place... which is why we need "native" sliders in this plugin in order to be able to track their use properly.</p>
<p >So, the end result of all this is an in-memory database which this plugin maintains to store each Slider "short ID" reported by Touch Portal. Scripts can then query/search this data to find the short IDs they may need, at any time. Once the script has the correct ID, sending an update is just a function call to <code><a class="el" href="group___t_p_a_p_i.html#gae18d5fec12d5b68429d55edd2362f65f" title="Sends a connector (slider) update with given value which should be an integer in the range of 0 - 100...">TP.connectorUpdate()</a></code> with the ID and a numeric value.</p>
<p >The full API is documented over in the <a class="el" href="group___t_p_a_p_i.html">Touch Portal API (TP)</a> section, and access to the ID data specifically in the "Connector Data" subsection.<br  />
 The <a class="el" href="example_color_picker.html">Color Picker Example</a> makes extensive use of Sliders, both as input to change color values and for visual feedback of current values.</p>
<p ><code>*</code> A Touch Portal slider with <em>Set Value</em> action can be adjusted externally by setting the corresponding Value, eg. with a <code><a class="el" href="group___t_p_a_p_i.html#gabc30c9dbb5074f0b2e36307a25f16ef3" title="Send a State update to Touch Portal for any arbitrary state/value matching the id,...">TP.stateUpdateById()</a></code> call using that Value's ID. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="documentation.html">Plugin Documentation</a></li>
    <li class="footer">Generated for Dynamic Script Engine Plugin for Touch Portal &#160;v1.1.0.1-beta1 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
