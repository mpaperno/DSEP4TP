<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dynamic Script Engine Plugin for Touch Portal: Plugin Actions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init();
    DoxygenAwesomeParagraphLink.init();
    DoxygenAwesomeInteractiveToc.init();
    // hide the Documentation header and sidebar link since it's redundant when on the docs site already.
    $(window).on('load', () => {
      function removeElements() {
        if (!$("a[class='index.html:autotoc_md10']").length)
          setTimeout(removeElements, 10);
        var el = document.getElementById("autotoc_md10"),
          els = document.getElementsByClassName("index.html:autotoc_md10");
        if (el)
          el.parentNode.style.display = 'none';
        if (els.length)
          els[0].parentElement.parentElement.parentElement.style.display= 'none';
      };
      removeElements();
    });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/mpaperno/DSEP4TP" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z" fill="url(#gradient)"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    <linearGradient id="gradient" x1="0.5" x2="0.5" y1="0" y2="1">
        <stop class="first-stop" offset="0%"></stop>
        <stop class="last-stop" offset="100%"></stop>
    </linearGradient>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png" title="Dynamic Script Engine Plugin for Touch Portal - A complete, standalone, multi-threaded JavaScript environment available as a plugin for use with Touch Portal macro launcher software."/></td>
  <td id="projectalign">
   <div id="projectname"><!-- Dynamic Script Engine Plugin for Touch Portal --><span id="projectnumber">&#160;v1.0.0.1-beta1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('plugin_actions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Plugin Actions </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md20">Available Actions</a><ul><li class="level2"><a href="#autotoc_md21">Evaluate Expression</a></li>
<li class="level2"><a href="#autotoc_md22">Load Script File</a></li>
<li class="level2"><a href="#autotoc_md23">Import Module File</a></li>
<li class="level2"><a href="#autotoc_md24">Update Existing Instance</a></li>
<li class="level2"><a href="#plugin_actions_one-time-script">Anonymous (One-Time) Script</a></li>
<li class="level2"><a href="#actions_plugin-action">Plugin Actions</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_pages_Actions"></a></p>
<h1><a class="anchor" id="autotoc_md20"></a>
Available Actions</h1>
<p ><img src="images/actions/actions-list.jpg" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md21"></a>
Evaluate Expression</h2>
<p ><a href="images/doc/actions/evaluate.jpg" target="fullSizeImg"><img src="images/actions/evaluate.jpg" alt="" class="inline"/></a></p>
<p >This is the most basic action which creates a new State with the value of whatever the given expression results in. The other action described below all share the same options (as well as add some others). The common options are only explained here.</p>
<ul>
<li><b>State Name</b> - This will be the name given to the new Touch Portal State once it is created. Once created it will appear in Touch Portal's various value selector lists.<br  />
 The name is also used in a few other places to refer to this instance of a "dynamic script."</li>
<li><b>Evaluate Expression</b> &ndash; This is what you want to do. It can be any one-line valid JavaScript; basic math, reading/writing files, sending dynamic button icons... The limit is your imagination and the single-line nature of the action. There are some examples on the front-page README.</li>
<li><b>Engine Instance</b> - This is an important distinction about how and "where" your script is run. Most one-line scripts will probably want to use the <code>Shared</code> types, while more complex scripts (described below) will likely want to use the <code>Private</code> types. Here is the difference:<ul>
<li><b>Shared</b> - All expressions/scripts are run in the same script evaluation engine instance, with a shared "global scope" as if they were all, essentially, in the same script file. This means, for example you could share variables or other data between script instances. It also means one expression/script could overwrite variables of another script in the same shared engine. For one-line expressions this is usually not an issue since they likely won't create variables anyway.<br  />
 <b>All Shared engine instances run in the same processing thread.</b> That means they cannot run at exactly the same time, one will need to finish before the next one will be processed. This is typically more efficient for relatively quick operations like math or text formatting or really anything that isn't going to take time, like reading a file or requesting a URL.</li>
<li><b>Private</b> - Each script gets its own processing engine environment to work in. Scripts in private instances cannot interfere with each other and share no data in the global scope. This makes them suitable for more complex scripts which may need to create global variables or otherwise ensure there is no interference.<br  />
 <b>Private engine instances run in their own processing thread.</b> This means multiple scripts can be running at the same time in parallel, and slower ones will not delay other processing. For example if you have an operation like reading a file or requesting a URL, it is definitely better to run that in a <code>Private</code> instance (even if it's only a "one liner"). On the other hand it takes slightly longer to start a new thread so for quick operations it doesn't make sense (talking nanosecond scale here).</li>
</ul>
</li>
<li><b>Create State at Startup</b> - Selecting anything besides "No" will cause the plugin to create the named State when it starts up (presumably at the same time as Touch Portal starts).<br  />
 The action's configuration will be saved by the plugin to a settings file and automatically loaded the next time the plugin starts. You can also specify what "kind" default value to use:<ul>
<li><b>Fixed Value</b> - The default will be exactly what you enter in the <em>Default Value</em> text box. No script evaluation will take place. You could leave the value empty, in which case the state will be created with an empty (blank) default.</li>
<li><b>Custom Expression</b> - This is an expression which will be evaluated by the configured engine at startup, instead of the primary/main expression the action uses. The idea here is that dynamic values used in the main expression may not exist yet, for example, when Touch Portal first starts up. Or perhaps you just want to do something else the first time it runs.</li>
<li><b>Use Action's Express</b> - This will simply run the same expression at startup as specified in the <em>Evaluate Expression</em> field.</li>
</ul>
</li>
<li><b>Default Value/Expr</b> - As explained above, here you could enter a fixed default value to use at startup, or a custom expression to use instead of the action's main one.<br  />
 This field is ignored when the <em>Create State at Startup</em> is set to "No" or "Use Action's Expression."</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Load Script File</h2>
<p ><a href="images/doc/actions/script.jpg" target="fullSizeImg"><img src="images/actions/script.jpg" alt="" class="inline"/></a></p>
<p >This actions lets you load a JavaScript file and then (optionally) add an expression to execute after the script file is loaded. For example to invoke a function within the script while passing it some dynamic arguments.</p>
<ul>
<li><b>Script File</b> - This is simply a path to your script file. By default, paths are relative tom the plugin's install folder, so you will likely want to use full paths here.<ul>
<li>You can change the base path from which scripts (and modules, below) are loaded in the plugin's Settings in Touch Portal (<em>gear icon at top right -&gt; Plugin-in -&gt; then select this plugin</em>).<br  />
 Specify a path in the <b>Script Files Base Directory</b> setting. All script and module file paths will now be relative to this base directory.<br  />
 (You can still use absolute paths in script actions, of course, this setting does not affect that.)</li>
<li>Paths on Windows can use forward (<code>/</code>) or back (<code>\</code>) slashes.</li>
<li>Paths must be typed or pasted in (until the file selector widget for plugins is fixed in Touch Portal).</li>
</ul>
</li>
<li><b>Append Expression</b> - This is the JavaScript to run after the file has been loaded and evaluated. The expression is literally appended after the file contents. Typically this would be a call into a function from the loaded script, as shown in the example, but it could be any valid code that works with your loaded script file.</li>
</ul>
<p >The rest of the fields are as described above.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Import Module File</h2>
<p ><a href="images/doc/actions/module.jpg" target="fullSizeImg"><img src="images/actions/module.jpg" alt="" class="inline"/></a></p>
<p >This is a somewhat more advanced version of the <em>Load Script File</em> action. It is very similar but the advantage of JavaScript modules are that:</p><ol type="1">
<li>They can import other JS modules for efficient code reuse and integrating with 3rd party modules.</li>
<li>Are cached in the script engine after first use. So they only load from disk once, and after that each subsequent import uses the cached version.</li>
</ol>
<p >However since they're cached, when you make changes to a module's code you must re-create the instance or reload the script environment (there are actions for that, see below). If you don't need to use other modules, it can be quicker to develop and test your code as a standalone script (the above action) and then turn it into a module once you have it working as you'd like.</p>
<ul>
<li><b>Import from file</b> - Specify the module's script file to load. This is just a path to a file, the same as described in <a class="el" href="plugin_basics.html#autotoc_md26">Load Script File</a> action above.</li>
<li><b>as alias</b> - To use a function from a loaded module, the module must have an alias (these are JS rules). In a typical JS you'd usually use something like <code>import * from "mymodule.js" as MyModule</code> and then call functions from the module as <code>MyModule.someFunction()</code>. This <em>alias</em> field is the equivalent of the "as name" part of the import statement. The default import alias is just "M" to keep things short, but you can use whatever you want.</li>
<li><b>Evaluate expression</b> - Again this is like in the <em>Load Script File</em> action above. The expression gets invoked after the module has been imported. You can use it to call a function from the loaded module, for example. To call a module function the alias must be used here, like in the example.<br  />
 <b>Note</b> that modules must explicitly <code>export</code> a function (or variable) before it can be used from outside the module. The same applies here, the function you call in the expression must be marked as exported in the module itself, otherwise you get an undefined value TypeError.</li>
</ul>
<p >The rest of the fields are as described in <em>Evaluate Expression</em> action.</p>
<h2><a class="anchor" id="autotoc_md24"></a>
Update Existing Instance</h2>
<p ><a href="images/doc/actions/update.jpg" target="fullSizeImg"><img src="images/actions/update.jpg" alt="" class="inline"/></a></p>
<p >This is a very simple action which evaluates an expression using an already existing dynamic script instance. An instance with the same State Name must have already been created for this to work. The idea is that if you want to use the same instance in multiple places, it may be simpler to have the main, full, definition in only one place, and simpler "update" action(s) in other places. This way one doesn't need to update all actions if a file path changes or you want a different default value.</p>
<h2><a class="anchor" id="plugin_actions_one-time-script"></a>
Anonymous (One-Time) Script</h2>
<p ><a href="images/doc/actions/onetime.jpg" target="fullSizeImg"><img src="images/actions/onetime.jpg" alt="" class="inline"/></a></p>
<p >Sometimes you may just want to run some code but don't need to have any result returned as a State, and don't need the instances to persist between uses for any other reason.</p>
<p >This action combines the first 3 types of actions above, meaning from here you can do anything from a simple expression to loading a module.</p><ul>
<li><b>Action Type</b> - Corresponds to one of the 3 ways of running code described above &ndash; Evaluate an Expression or Load Script/Module and run some function from that.</li>
<li><b>Evaluate Expression</b> Applies to all 3 <em>Action Type</em> choices. It is required for the "Expression" type, and optional for the "Script" and "Module" types.</li>
<li><b>Script/Module File</b> - Required for "Script" and "Module" action types.</li>
<li><b>Module alias</b> - Required for "Module" action types. If blank, defaults to "M".</li>
<li><b>Engine Instance</b> - As described in <em>Evaluate Expression</em> action.</li>
</ul>
<p >Since this type of script doesn't persist or have a State associated with it, there are no options to run it at startup like with the others.</p>
<h2><a class="anchor" id="actions_plugin-action"></a>
Plugin Actions</h2>
<p ><a href="images/doc/actions/plugin.jpg" target="fullSizeImg"><img src="images/actions/plugin.jpg" alt="" class="inline"/></a></p>
<p >This is a collection of utilities for working with created states/instances. It can be used to perform a variety of tasks based on the "Action" parameter. Each of the actions can be applied to all instances, only <code>Shared</code> or <code>Private</code> engine types, or individual instances that have already been created.</p>
<ul>
<li><b>Delete Instance</b> - Complete deletes the Touch Portal State and any other data related to this script instance. If the instance has been previously saved to settings (with a default value) the it will be removed from there as well. The <em>Value</em> field doesn't apply to this action.</li>
<li><b>Set State Value</b> - This is just a convenience for clearing or setting a State's value manually, for example to trigger a Touch Portal change event. Specify the value to set the state(s) to in the <em>Value</em> field.</li>
<li><b>Reset Engine Environment</b> - This restores an script environment (JS "global object") back to default, removing any variables/object/etc created by scripts or expressions. If working with modules, this is a good way to clear the module cache. The <em>Value</em> field doesn't apply to this action.</li>
</ul>
<p ><span class="next_section_button"> Read Next: <a class="el" href="plugin_status_and_logging.html#md_pages_Status">Status and Logging</a> </span> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="documentation.html">Plugin Documentation</a></li>
    <li class="footer">Generated on Mon Dec 26 2022 20:53:16 for Dynamic Script Engine Plugin for Touch Portal by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
